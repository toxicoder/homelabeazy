---
layout: default
title: Configuration
parent: Reference
nav_order: 3
permalink: /configuration
has_children: true
---

# Configuration

Welcome to the configuration guide for Homelabeazy! This document will walk you through the process of configuring your homelab environment. A solid understanding of these concepts will help you get the most out of your Homelabeazy setup.

## Configuration Strategy

At the heart of Homelabeazy is the principle of "Infrastructure as Code" (IaC). This means that all the configuration for your homelab is stored in files, which can be versioned, shared, and reused. This approach has several advantages:

*   **Reproducibility:** You can easily recreate your entire homelab setup from the configuration files.
*   **Consistency:** All your environments (development, testing, production) will be configured in the same way.
*   **Automation:** You can automate the process of setting up and managing your homelab.

Your configuration is stored in a private Git repository that you control. The `make setup-interactive` script will help you generate the initial configuration files and commit them to your repository.

## Configuration File Types

The configuration is split into several types of files, each with a specific purpose:

1.  **Global Settings (`config.yml`):** This file contains high-level settings for your homelab, such as your domain name and timezone.
2.  **Terraform Variables (`terraform.tfvars`):** This file contains variables specific to the Proxmox infrastructure, such as your API credentials and the specifications for your virtual machines.
3.  **Ansible Inventory:** This file tells Ansible which hosts to connect to and how to connect to them.
4.  **Application Configuration (`apps/`):** This directory contains `values.yaml` files for each application. These files are used to configure the Helm charts that are deployed by ArgoCD.

During the setup process, the `homelabeazy` repository will create a symlink named `private` that points to your private configuration directory. This allows the tools in this repository to access your configuration without you having to copy it over.

---

## 1. Global Configuration (`config.yml`)

This file is the central place for all your high-level configuration. It is generated by the `homelab-importer` tool during the interactive setup, but you can also edit it manually.

Here's a breakdown of the variables in this file:

| Variable                        | Description                                                                                                                                                             |
| ------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `common.domain_name`            | The domain name for your homelab (e.g., `homelab.local`). This domain will be used to access the various services running in your homelab.                               |
| `common.timezone`               | The timezone for your servers (e.g., `Etc/UTC`). It's important to set this correctly to ensure that your logs and other time-sensitive data are accurate.               |
| `common.load_balancer_ip`       | The IP address to be used by the Kubernetes load balancer. This IP address must be on the same subnet as your homelab servers.                                           |
| `common.proxmox_node`           | The name of the Proxmox node where you want to deploy your virtual machines.                                                                                            |
| `common.proxmox_template`       | The name of the cloud-init template to use for new VMs. This template should be a minimal Linux distribution, such as Ubuntu Cloud-init.                                  |
| `common.proxmox_service_bridge` | The Proxmox network bridge for the service network. This bridge will be used for communication between the virtual machines in your homelab.                              |
| `common.proxmox_service_vlan_tag` | The VLAN tag for the service network. If you are not using VLANs, you can leave this blank.                                                                             |
| `common.k3s_master_vm_id`       | The VM ID for the K3s master node. This must be a unique ID in your Proxmox environment.                                                                                |
| `common.k3s_worker_vm_id_start` | The starting VM ID for the K3s worker nodes. For example, if you set this to `101` and you have 3 worker nodes, the worker nodes will have VM IDs `101`, `102`, and `103`. |
| `common.ldap_base_dn`           | The base DN for the LDAP server. This is the top-level entry in your LDAP directory.                                                                                    |
| `secrets_to_generate`           | A list of secrets to be generated by the `secure_gen` role. This is used to bootstrap the security of your homelab.                                                     |

---

## 2. Terraform Variables (`terraform.tfvars`)

This file holds the variables needed by Terraform to provision the infrastructure on Proxmox. The `homelab-importer` tool will generate this file based on your existing Proxmox environment.

| Variable              | Description                                                                                                                                                              |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `proxmox_api_url`     | The URL of your Proxmox API (e.g., `https://proxmox.example.com/api2/json`).                                                                                               |
| `pm_token_id`         | Your Proxmox API token ID. You can generate this in the Proxmox web UI under `Datacenter > Permissions > API Tokens`.                                                      |
| `pm_token_secret`     | Your Proxmox API token secret. This is a sensitive value and should be treated like a password.                                                                          |
| `proxmox_node`        | The name of the Proxmox node to deploy to. This should be the same value as `common.proxmox_node` in your `config.yml` file.                                                |
| `proxmox_template`    | The name of the cloud-init template to use for the VMs. This should be the same value as `common.proxmox_template` in your `config.yml` file.                               |
| `k3s_worker_count`    | The number of K3s worker nodes to create. For most homelab setups, a single worker node is sufficient. If you plan to run a large number of applications, you may want to increase this value. Defaults to `1`. |
| `k3s_master_memory`   | The amount of memory (in MB) for the master VM. `2048` (2GB) is a good starting point. Defaults to `2048`.                                                                 |
| `k3s_master_cores`    | The number of CPU cores for the master VM. `2` cores should be sufficient for most setups. Defaults to `2`.                                                                 |
| `k3s_worker_memory`   | The amount of memory (in MB) for the worker VMs. `2048` (2GB) is a good starting point. Defaults to `2048`.                                                                 |
| `k3s_worker_cores`    | The number of CPU cores for the worker VMs. `2` cores should be sufficient for most setups. Defaults to `2`.                                                                |

---

## 3. Ansible Inventory

The Ansible inventory file (`ansible/inventory/inventory.auto.yml`) is generated automatically when you run the interactive setup. The script uses the output of `terraform output -json` to create the inventory file. You should not need to edit this file manually.

This file tells Ansible which hosts to connect to and how to connect to them. It is a crucial part of the automation process, as it allows Ansible to configure your virtual machines and deploy your applications.
