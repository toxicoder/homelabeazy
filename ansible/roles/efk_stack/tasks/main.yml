- name: Install ECK CRDs
  kubernetes.core.k8s:
    src: https://download.elastic.co/downloads/eck/3.0.0/crds.yaml
    state: present

- name: Install ECK Operator
  kubernetes.core.k8s:
    src: https://download.elastic.co/downloads/eck/3.0.0/operator.yaml
    state: present

- name: Create Elasticsearch cluster
  kubernetes.core.k8s:
    template: elasticsearch.yml.j2
    state: present

- name: Create Kibana instance
  kubernetes.core.k8s:
    template: kibana.yml.j2
    state: present

- name: Create Fluentd DaemonSet
  kubernetes.core.k8s:
    template: fluentd.yml.j2
    state: present
